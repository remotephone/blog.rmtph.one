<!DOCTYPE html><html lang="en" > <!-- The Head v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>My Homelab - Part 2 - Proxmox Hosts | Notepad+++</title><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="My Homelab - Part 2 - Proxmox Hosts" /><meta name="author" content="remotephone" /><meta property="og:locale" content="en_US" /><meta name="description" content="My Homelab - Proxmox" /><meta property="og:description" content="My Homelab - Proxmox" /><link rel="canonical" href="https://remotephone.github.io/posts/My_Homelab_Part_2/" /><meta property="og:url" content="https://remotephone.github.io/posts/My_Homelab_Part_2/" /><meta property="og:site_name" content="Notepad+++" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-02-21T06:33:00-06:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="My Homelab - Part 2 - Proxmox Hosts" /><meta name="twitter:site" content="@remotephone" /><meta name="twitter:creator" content="@remotephone" /> <script type="application/ld+json"> {"author":{"@type":"Person","name":"remotephone"},"description":"My Homelab - Proxmox","@type":"BlogPosting","headline":"My Homelab - Part 2 - Proxmox Hosts","url":"https://remotephone.github.io/posts/My_Homelab_Part_2/","dateModified":"2022-02-21T06:33:00-06:00","datePublished":"2022-02-21T06:33:00-06:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://remotephone.github.io/posts/My_Homelab_Part_2/"},"@context":"https://schema.org"}</script> <!-- The Favicons for Web, Android, Microsoft, and iOS (iPhone and iPad) Apps Generated by: https://www.favicon-generator.org/ v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2019 Cotes Chung Published under the MIT license --><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon.png"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon-precomposed.png"><link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicons/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicons/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicons/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicons/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicons/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicons/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicons/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicons/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/assets/img/favicons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/manifest.json"><meta name='msapplication-config' content='/assets/img/favicons/browserconfig.xml'><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/assets/img/favicons/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="cdn.jsdelivr.net"><link rel="dns-prefetch" href="cdn.jsdelivr.net"><link rel="preload" as="style" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous"> <!-- CSS selector for site. Chirpy v2.3 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT Licensed --><link rel="preload" as="style" href="/assets/css/post.css"><link rel="stylesheet" href="/assets/css/post.css"><link rel="preload" as="style" href="/assets/css/lib/bootstrap-toc.min.css"><link rel="stylesheet" href="/assets/css/lib/bootstrap-toc.min.css" /><link rel="preload" as="script" href="https://cdn.jsdelivr.net/npm/jquery@3.4.1" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"> <script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" async></script> <!-- JS selector for site. Chirpy v2.3 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT Licensed --> <script src="/assets/js/post.min.js" async></script> <script src="/app.js" defer></script><meta name="twitter:site" content="@"><meta name="twitter:creator" content="@remotephone"><meta name="twitter:title" content="My Homelab - Part 2 - Proxmox Hosts"><meta name="twitter:description" content="My personal blog, mostly security focused."><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image" content="https://remotephone.github.io/images/avatar.jpg"><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column"> <!-- The Side Bar v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><div id="nav-wrapper"><div id="profile-wrapper" class="d-flex flex-column"><div id="avatar" class="d-flex justify-content-center"> <a href="/" alt="avatar"> <img src="/images/avatar.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="profile-text mt-3"><div class="site-title"> <a href="/">Notepad+++</a></div><div class="site-subtitle font-italic">Break it, fix it, write it down.</div></div></div><ul class="nav flex-column"><li class="nav-item d-flex justify-content-center "> <a href="/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a></li><li class="nav-item d-flex justify-content-center "> <a href="/tabs/categories/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a></li><li class="nav-item d-flex justify-content-center "> <a href="/tabs/tags/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a></li><li class="nav-item d-flex justify-content-center "> <a href="/tabs/archives/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a></li><li class="nav-item d-flex justify-content-center "> <a href="/tabs/about/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></li></ul></div><div class="sidebar-bottom d-flex flex-wrap justify-content-around mt-4"> <span id="mode-toggle-wrapper"> <!-- Switch the mode between dark and light. v2.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT License --> <i class="mode-toggle fas fa-sun" dark-mode-invisible></i> <i class="mode-toggle fas fa-moon" light-mode-invisible></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.mode != null) { if (this.mode == ModeToggle.DARK_MODE) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.mode != null) { if (self.mode == ModeToggle.DARK_MODE) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightkMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightkMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span> <span class="icon-border"></span> <a href="https://github.com/remotephone" target="_blank"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/remotephone" target="_blank"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:window.open('mailto:' + ['remotephone','gmail.com'].join('@'))" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" > <i class="fas fa-rss"></i> </a></div></div><!-- The Top Bar v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>My Homelab - Part 2 - Proxmox Hosts</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"> <!-- Fixed kramdown code highlight rendering: https://github.com/penibelst/jekyll-compress-html/issues/101 https://github.com/penibelst/jekyll-compress-html/issues/71#issuecomment-188144901 --><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>My Homelab - Part 2 - Proxmox Hosts</h1><div class="post-meta text-muted d-flex flex-column"><div> Posted <!-- Date format snippet v2.4.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT License --> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Mon, Feb 21, 2022, 6:33 AM -0600" > Feb 21 <i class="unloaded">2022-02-21T06:33:00-06:00</i> </span> by <span class="author"> remotephone </span></div><div> Updated <!-- Date format snippet v2.4.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT License --> <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Fri, Jul 8, 2022, 10:17 PM -0500" > Jul 8 <i class="unloaded">2022-07-08T22:17:59-05:00</i> </span></div></div><div class="post-content"><h1 id="my-homelab---proxmox">My Homelab - Proxmox</h1><p>So with networking out of the way, we can talk about Proxmox, or more specifically <a href="https://www.proxmox.com/en/proxmox-ve">Proxmox VE</a>. Proxmox is an open source virtualization software built on top of Debian. It is a free, fully featured open source alternative to things like VSphere. It has excellent support for virtualization of most major operating systems and LXC containers, both of which I use in my lab.</p><h2 id="hardware">Hardware</h2><p>I have proxmox running on two hosts, both of them Lenovo ThinkCentre workstations. These are the mini PCs you may see mounted behind doctor office monitors or terminals where decent computing power is needed in a small package. A little dusty, but these are mine:</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://remotephone.github.io/images/lab2_01.png" alt="Proxmox Hosts" class="center-image" /></p><p>One of my hosts is an 2-core/4-thread i5 and the other an 4-core/8-thread i7, the difference hasn’t mattered since you can deploy what you want where, but more on that later. Both hosts have 16gb of ram, giving me 12 virtual cpu’s and 32gb of ram across both hosts.</p><p>To find them, I go to ebay and search “tiny pc i7” or “lenovo tiny pc” or some other combination like that. I look for people selling batches of them since you can tend to Make an Offer and get a cheaper price than otherwise. Depending on current ram and SSD prices, I shop for the CPU and expect to replace or upgrade the ram and SSD after I buy it. It all depends on what seems cheapest at the time.</p><p>For SSDs, I use 256GB Crucial MX500’s because those were the cheapest and best quality I could find at the time that I bought them. For the RAM, I use 16gb packs off Amazon, usually again the cheapest.</p><p>So looking at the prices of hardware I’ve bought, it breaks down like this (at today’s prices if I couldn’t find receipts):</p><ol><li>M93p Tiny - i7-4765T w/ 8GB ram - $224 (2021)</li><li>M92p Tiny - i5-3570T w/ 8GB ram - $180 (2017?)</li><li>2X Crucial MX500 - 256GB SSDs - $80</li><li>16GB Silicon Power DDR3 ram - ~$50</li></ol><p>There was also a second system which just died and I was never able to troubleshoot back to life. That one cost about $180 and I moved it’s parts over to my new system.</p><p>So all in, this costs about $530 dollars over 5 years, $710 if you include the broken system (just bad luck maybe). It seems like a lot and there maybe was cheaper ways to do this, but compare that to <a href="https://calculator.aws/#/createCalculator/EC2">AWS costs</a>. A single 4 core, 16gb host with 256gb of storage costs $123.71 a month so it’s at least chaper than AWS on-Demand prices. Digital Ocean will do 4 core/8gb at $48 dollars a month so for 2 of those it’s still cheaper to own the hardware over time and repurpose it whenever this stack outlives it’s usefulness.</p><h2 id="proxmox-install">Proxmox Install</h2><p>I did nothing special here, I connected each host to a monitor and keyboard, plugged in the USB stick, and ran the installer. I use etcher to write my USB install sticks on Windows and native tools on linux (Ubuntu has that Startup USB creator) since that’s given me good luck for a while. I picked a simple hostname and configured networking to match my network settings, very standard stuff the <a href="https://www.proxmox.com/en/proxmox-ve/get-started">official docs</a> describe better than I could.</p><h2 id="networking">Networking</h2><p>Networking is pretty simple, when installing the OS I picked an IP address for both of them and statically configured it on the host. I also statically assigned the IP address in DD-WRT. During the install I have them plugged into a monitor and keyboard and use <code class="language-plaintext highlighter-rouge">ip addr</code> to get the mac address for the NIC. Assign that adddress in DD-WRT. Go to <code class="language-plaintext highlighter-rouge">Services</code> &gt; <code class="language-plaintext highlighter-rouge">Services</code>and under static leases, assign both IP addresses you selected to the MAC address of your host. Save and apply.</p><p>The hostname you assigned during installation of proxmox should match what you configure in your static IP Assignment. This will work together with your DD-WRT configuration and netmasq setup to let you connect to <code class="language-plaintext highlighter-rouge">proxmox1.my.domain</code>, this will matter later when we get into https certificates.</p><p>Once the OS install completes, test your ability to get into the host via SSH. If you can SSH into them both, you are done.</p><h2 id="clustering">Clustering</h2><p>The power of Proxmox is the ability to easily create multiple host clusters. I have a 2 node cluster, which isn’t ideal since you can’t support real high availability, but its plenty for my purposes.</p><p>Once the hosts are ready, I create the cluster via the command line. One of the strengths of Proxmox is the documentation and extensive history of forum posts to help you resolve problems and their <a href="https://pve.proxmox.com/wiki/Cluster_Manager">documentation</a> is a great place to get configuration steps for a cluster.</p><p>I’m not going to rebuild my cluster for this post, but the short of the process is:</p><ol><li>Connect to node1, whichever that is</li><li><code class="language-plaintext highlighter-rouge">pvecm create my-cluster</code> to initialize the cluster on the first host</li><li>Connect to the second host</li><li><code class="language-plaintext highlighter-rouge">pvecm add NODE1-IP</code> where node1 IP is the address you can use to SSH into the first host.</li><li><code class="language-plaintext highlighter-rouge">pvecm status</code> and <code class="language-plaintext highlighter-rouge">pvecm nodes</code> to verify it worked.</li></ol><p>You should see something like this:</p><div class="language-sh highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
</pre><td class="rouge-code"><pre>root@pve1:~# pvecm status
Cluster information
<span class="nt">-------------------</span>
Name:             cluster
Config Version:   4
Transport:        knet
Secure auth:      on

Quorum information
<span class="nt">------------------</span>
Date:             Sun Feb 20 07:21:49 2022
Quorum provider:  corosync_votequorum
Nodes:            2
Node ID:          0x00000001
Ring ID:          1.2a31
Quorate:          Yes

Votequorum information
<span class="nt">----------------------</span>
Expected votes:   2
Highest expected: 2
Total votes:      2
Quorum:           2  
Flags:            Quorate 

Membership information
<span class="nt">----------------------</span>
    Nodeid      Votes Name
0x00000001          1 192.168.0.11 <span class="o">(</span><span class="nb">local</span><span class="o">)</span>
0x00000002          1 192.168.0.12
root@pve1:~# pvecm nodes

Membership information
<span class="nt">----------------------</span>
    Nodeid      Votes Name
         1          1 pve1 <span class="o">(</span><span class="nb">local</span><span class="o">)</span>
         2          1 pve2
</pre></table></code></div></div><p>This does some interesting things under the hood, most notably share their respective SSH public key between the hosts so each can access each other freely. If you add a key to one, you get it added to both, which is kind of nice.</p><h2 id="nas-storage">NAS Storage</h2><p>I use a NAS storage attached to DD-wrt to support my network. This is where VM images, container images, and other things are stored. If you don’t already have one, you can set one up in DD-WRT pretty easily. Plug a large NTFS formatted external drive into the router’s USB 3 port and you can set up the rest in the console.</p><ol><li>Go to <code class="language-plaintext highlighter-rouge">Services</code> &gt; <code class="language-plaintext highlighter-rouge">USB</code>. Ensure <code class="language-plaintext highlighter-rouge">Core USB support</code> and <code class="language-plaintext highlighter-rouge">Automatic Drive Mount</code> are enabled.</li><li>Go to <code class="language-plaintext highlighter-rouge">Services</code> &gt; <code class="language-plaintext highlighter-rouge">NAS</code>.</li><li>Configure your NAS (more below)</li><li>Configure a Username and Passowrd in the Users section and allow them to access your NAS.</li></ol><p>Ansible will set up the rest for us, but you want to make sure you have everything in place before it tries to mount it to avoid having to troubleshoot it later.</p><h2 id="finishing-the-setup-with-ansible">Finishing the Setup with Ansible</h2><p>I use Ansible to configure my hosts. These the roles and playbook I run to set them up - <a href="https://github.com/remotephone/ansible-proxmox">https://github.com/remotephone/ansible-proxmox</a>.</p><p>The bootstrap role is something I have been using for a while, I forget exactly where I found it, (possibly <a href="https://gist.github.com/gwillem/4ba393dceb55e5ae276a87300f6b8e6f?">here</a>. The purpose of this is to bootstrap barebones systems to be ready for the rest of the ansible tasks. It was especially useful for older OSes or barebones LXC containers.</p><p>The meat of it is this task, check if <code class="language-plaintext highlighter-rouge">/usr/bin/python</code> exists and if it fails, update and install python.</p><div class="language-yaml highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="nn">---</span>

<span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">install python </span><span class="m">2</span>
  <span class="na">raw</span><span class="pi">:</span> <span class="s">test -e /usr/bin/python || (apt -y update &amp;&amp; apt install -y python-minimal)</span>
  <span class="na">register</span><span class="pi">:</span> <span class="s">myoutput</span>
  <span class="na">changed_when</span><span class="pi">:</span> <span class="s">myoutput.rc != </span><span class="m">0</span>

<span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">now gather_facts</span>
  <span class="na">setup</span><span class="pi">:</span>
</pre></table></code></div></div><p>Then we <a href="https://github.com/remotephone/ansible-proxmox/blob/master/roles/hostconfig/tasks/main.yml">set up the rest of the host</a>. We configure apt, configure the NAS, enable ipv4 forwarding, disable ipv6, and update and upgrade everything. Pretty straight forward, but nice to have scripted out.</p><h2 id="what-now">What Now?</h2><p>Ok, so it’s on, plugged in, connected, networked, clustered, backed by storage, and we’re mostly ready to go. The next parts get into my AWS accounts so I’ll be covering those in the next posts. Thanks for reading.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/lab/'>lab</a>, <a href='/categories/workflow/'>workflow</a>, <a href='/categories/networking/'>networking</a>, <a href='/categories/proxmox/'>proxmox</a>, <a href='/categories/lxc/'>lxc</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><!-- Post sharing snippet v2.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2019 Cotes Chung Published under the MIT License --><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=My Homelab - Part 2 - Proxmox Hosts - Notepad+++&url=https://remotephone.github.io/posts/My_Homelab_Part_2/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=My Homelab - Part 2 - Proxmox Hosts - Notepad+++&u=https://remotephone.github.io/posts/My_Homelab_Part_2/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=My Homelab - Part 2 - Proxmox Hosts - Notepad+++&url=https://remotephone.github.io/posts/My_Homelab_Part_2/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank"> <i class="fa-fw fab fa-telegram"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><!-- The Pannel on right side (Desktop views) v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"><h3 data-toc-skip>Recent Update</h3><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/what-is-markdown/">What is Markdown anyway?</a></li><li><a href="/posts/welcome-to-jekyll/">Welcome to My Scratchpad</a></li><li><a href="/posts/reverse-shell-cheatsheet/">Reverse Shell Cheat Sheet</a></li><li><a href="/posts/practical-docker-part2/">Practical Docker for Security Admins - Part 2</a></li><li><a href="/posts/practical-docker/">Practical Docker for Security Admins - Part 1</a></li></ul></div></div><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><h3 data-toc-skip class="pl-3 pt-2 mb-2">Contents</h3><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"> <!-- Recommend the other 3 posts according to the tags and categories of the current post, if the number is not enough, use the other latest posts to supplement. v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2019 Cotes Chung Published under the MIT License --><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/Tailscale_at_home/"><div class="card-body"> <!-- Date format snippet v2.4.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT License --> <span class="timeago small" > Jan 2 <i class="unloaded">2022-01-02T22:49:00-06:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Tailscale at Home</h3><div class="text-muted small"><p> What I’m Doing Now I have a homelab of sorts, I previously wrote about it here and here. It’s changed a little bit since I wrote those, but I still had a need (more of a want tbh) to be able to ac...</p></div></div></a></div><div class="card"> <a href="/posts/My_Homelab_Part_1/"><div class="card-body"> <!-- Date format snippet v2.4.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT License --> <span class="timeago small" > Feb 18 <i class="unloaded">2022-02-18T16:33:00-06:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>My Homelab - Part 1 - Hardware and Networking</h3><div class="text-muted small"><p> My Homelab My last post made me think about how much my homelab has changed and that maybe it’s time to write about how I am doing things in it again. Most of my hardware has stayed mostly the sam...</p></div></div></a></div><div class="card"> <a href="/posts/My_Homelab_Part_3/"><div class="card-body"> <!-- Date format snippet v2.4.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT License --> <span class="timeago small" > Feb 28 <i class="unloaded">2022-02-28T22:04:00-06:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>My Homelab - Part 3 - Support Services</h3><div class="text-muted small"><p> My Homelab - Support Services There’s a few things I run in my lab that support other things happening and make things move along smoothly. They are spread across AWS and services I have running i...</p></div></div></a></div></div></div><!-- Navigation buttons at the bottom of the post. v2.1 https://github.com/cotes2020/jekyll-theme-chirpy © 2020 Cotes Chung MIT License --><div class="post-navigation d-flex justify-content-between"> <a href="/posts/My_Homelab_Part_1/" class="btn btn-outline-primary"><p>My Homelab - Part 1 - Hardware and Networking</p></a> <a href="/posts/My_Homelab_Part_3/" class="btn btn-outline-primary"><p>My Homelab - Part 3 - Support Services</p></a></div></div></div></div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script> <script type="text/javascript"> const imgs = document.querySelectorAll('#post-wrapper img'); const observer = lozad(imgs); observer.observe(); </script> <!-- The Footer v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2022 <a href="https://twitter.com/remotephone">remotephone</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy/">Chirpy</a> theme.</p></div></div></footer></div><!-- The Search results v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-xl-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <!-- The GA snippet v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','https://www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-158754701-1', 'auto'); ga('send', 'pageview'); </script> <!-- Jekyll Simple Search loader v2.0 https://github.com/cotes2020/jekyll-theme-chirpy © 2017-2019 Cotes Chung MIT License --> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://remotephone.github.io{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"><div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>{categories}</div><div><i class="fa fa-tag fa-fw"></i>{tags}</div></div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>' }); </script>
